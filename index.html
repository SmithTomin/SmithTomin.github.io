<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<title>SSO API</title>


<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}
* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>


</head>

<body>

<h1 id="toc_0">Toming SSO API Guide</h1>

<ul>
<li><h2 id="toc_1"><a name="index"></a> Index</h2></li>
<li><h4 id="toc_2">API root URL :</h4>

<p>http://qasso.tomin.tw:8081/TominOP/oidc</p>

<ul>
<li><p><a href="#Tomin%20Single%20Sign%20On%20Server%20API"><strong>Tomin Single Sign On Server API</strong></a></p>

<ul>
<li><a href="#verifymember">/verifymember</a> </li>
<li><a href="#register">/register</a> </li>
<li><a href="#verifymember">/verifymember</a></li>
<li><a href="#register">/register</a> </li>
<li><a href="#updatemember">/updatemember</a> </li>
<li><a href="#checkidpassword">/checkidpassword</a> </li>
<li><a href="#userallinfo">/userallinfo</a> </li>
<li><a href="#allsyncfaildata">/allsyncfaildata</a> </li>
<li><a href="#clearsyncfaildata">/clearsyncfaildata</a> </li>
<li><a href="#forgotpassword">/forgotpassword</a> </li>
<li><a href="#checkforgotverify">/checkforgotverify</a> </li>
<li><a href="#verifycodeupdatepwd">/verifycodeupdatepwd</a> </li>
<li><a href="#getsubemail">/getsubemail</a> </li>
<li><a href="#updatesubemail">/updatesubemail</a> </li>
<li><a href="#deletesubemail">/deletesubemail</a> </li>
<li><a href="#getsubphone">/getsubphone</a> </li>
<li><a href="#updatesubphone">/updatesubphone</a> </li>
<li><a href="#deletesubphone">/deletesubphone</a> </li>
</ul></li>
<li><p><a href="#Predefine%20API"><strong>Predefine API</strong></a> </p>

<ul>
<li><a href="#gender">/predefine/gender</a> </li>
<li><a href="#locale">/predefine/locale</a> </li>
<li><a href="#zoneinfo">/predefine/zoneinfo</a> </li>
</ul></li>
</ul></li>
</ul>

<h1 id="toc_3"><a name="Tomin Single Sign On Server API"></a> Tomin Single Sign On Server API</h1>

<h3 id="toc_4">These APIs are usually used for registring or changeing user info by relay parties(EC`IM...etc).The most data format is defined in the <a href="http://openid.net/specs/openid-connect-core-1_0.html#StandardClaims">link</a>,but we still need to add some custom data(like pwd,seed) for some reqirement(like authentication) when using these APIs.</h3>

<h3 id="toc_5">這些API一般是給RP(像EC IM...)用在註冊或是更換使用者資料時使用，大部份的資料規格都是參照此<a href="http://openid.net/specs/openid-connect-core-1_0.html#StandardClaims">連結</a>,不過當我們使用這些API時仍需要為了特定需求(如認證)而需加入一些特定的資料(像pwd,seed)</h3>

<h2 id="toc_6"><a name="verifymember"></a> verifymember</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/verifymember</td>
<td>POST</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>SSO中,Subject指的就是會員帳號ID,此API是用來檢查此會員帳號是否已存在，通常是用在RP的註冊流程上</td>
</tr>
<tr>
<td>In the SSO, Subject is mean the member account ID , so the API is for Checking the subject is exists.Always using in the registry step.</td>
</tr>
</tbody>
</table>

<p>Input Data Type: x-www-form-unlencoded</p>

<table>
<thead>
<tr>
<th>Parameters</th>
<th>Attributes</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>sub</td>
<td>(required)String</td>
<td>member account ID</td>
</tr>
</tbody>
</table>

<p>Result:</p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
</tbody>
</table>

<p>JSON Content Define:</p>

<table>
<thead>
<tr>
<th>ret_code</th>
<th>ret_desc</th>
</tr>
</thead>

<tbody>
<tr>
<td>0</td>
<td>Without the subject</td>
</tr>
<tr>
<td>1</td>
<td>The subject is exists</td>
</tr>
</tbody>
</table>

<p>Return example:</p>

<p>{
  &quot;ret_code&quot; : 0
}</p>

<p><a href="#index">TOP</a> </p>

<h2 id="toc_7"><a name="register"></a> register</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/register</td>
<td>POST</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>註冊新使用者</td>
</tr>
<tr>
<td>Registring new User</td>
</tr>
</tbody>
</table>

<p>Input Data Type: JSON</p>

<table>
<thead>
<tr>
<th>Parameters</th>
<th>Attributes</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>sub</td>
<td>(required)String</td>
<td>Subject - Identifier for the End-User at the Issuer</td>
</tr>
<tr>
<td>pwd</td>
<td>(required)String</td>
<td>The password encrypt string with seed by AES ( Key Format : ddHHssMMddHHssMM )</td>
</tr>
<tr>
<td>seed</td>
<td>(required)String</td>
<td>The AES key which is the timestamp when registering( Format : yyyyMMddHHmmss )</td>
</tr>
</tbody>
</table>

<ol>
<li> These 3 parameter data is must required when registring.The other parameter&#39;s properties are all optional,their detail format is reference by 
here : <a href="http://openid.net/specs/openid-connect-core-1_0.html#StandardClaims">link</a></li>
</ol>

<p>Result:</p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_desc</td>
<td>The state&#39;s detail description</td>
</tr>
<tr>
<td>refresh_token</td>
<td>The refresh token for relay parties</td>
</tr>
</tbody>
</table>

<p>JSON Content Define:</p>

<table>
<thead>
<tr>
<th>ret_code</th>
<th>ret_desc</th>
</tr>
</thead>

<tbody>
<tr>
<td>200</td>
<td>Register Successful</td>
</tr>
<tr>
<td>401</td>
<td>Basic authentication header&#39;s format is invalid</td>
</tr>
<tr>
<td>402</td>
<td>The client is not registried</td>
</tr>
<tr>
<td>403</td>
<td>The data can not parse to json</td>
</tr>
<tr>
<td>405</td>
<td>The suject is exist</td>
</tr>
<tr>
<td>406</td>
<td>Register fail: miss parameter &#39;sub&#39;</td>
</tr>
<tr>
<td>407</td>
<td>Register fail: miss parameter &#39;pwd&#39;</td>
</tr>
<tr>
<td>408</td>
<td>Register fail: miss parameter &#39;seed&#39;</td>
</tr>
<tr>
<td>500</td>
<td>Server SQL execute error</td>
</tr>
</tbody>
</table>

<p>Return example:</p>

<div><pre><code class="language-none">{

  &quot;ret_code&quot; : 200,

  &quot;ret_desc&quot; : &quot;Register Successful&quot;
  
  &quot;refresh_token&quot; : 5f9665ca0238df61fb133dde0e59753cb57764cbf8229cb2098f7cf109d05b07

}</code></pre></div>

<p><a href="#index">TOP</a> </p>

<h2 id="toc_8"><a name="updatemember"></a> updatemember</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/updatemember</td>
<td>POST</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>更新指定使用者資料(名字｀電話｀Email`密碼....等) , 並且透過各平台方註冊的API網址將同步資料用Post Json的方式打過去</td>
</tr>
<tr>
<td>Updating target user data(name phone email pwd ...etc) , then pushing sync data to the other relay parties&#39;s Sync API by http post json</td>
</tr>
</tbody>
</table>

<p>Input Data Type: JSON</p>

<table>
<thead>
<tr>
<th>Parameters</th>
<th>Attributes</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>sub</td>
<td>(required)String</td>
<td>Subject - Identifier for the End-User at the Issuer</td>
</tr>
</tbody>
</table>

<ol>
<li><p>The sub parameter data is must required when registring.The other parameter&#39;s properties are all optional,their detail format is reference by 
here : <a href="http://openid.net/specs/openid-connect-core-1_0.html#StandardClaims">link</a></p></li>
<li><p>The pwd &amp; seed must change together.</p></li>
</ol>

<p>Result:</p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_desc</td>
<td>The state&#39;s detail description</td>
</tr>
</tbody>
</table>

<p>state_code Define:</p>

<table>
<thead>
<tr>
<th>ret_code</th>
<th>ret_desc</th>
</tr>
</thead>

<tbody>
<tr>
<td>200</td>
<td>Update Successful</td>
</tr>
<tr>
<td>401</td>
<td>Basic authentication header&#39;s format is invalid</td>
</tr>
<tr>
<td>403</td>
<td>The data can not parse to json</td>
</tr>
<tr>
<td>404</td>
<td>The subject isn&#39;t registried</td>
</tr>
<tr>
<td>500</td>
<td>Server SQL execute error</td>
</tr>
</tbody>
</table>

<p>Return example:</p>

<div><pre><code class="language-none">{

  &quot;ret_code&quot; : 200,

  &quot;ret_desc&quot; : &quot;Update Successful&quot;

}</code></pre></div>

<p><a href="#index">TOP</a> </p>

<h2 id="toc_9"><a name="checkidpassword"></a> checkidpassword</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/checkidpassword</td>
<td>POST</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>確認此帳號密碼是否正確</td>
</tr>
<tr>
<td>Check the member account id with the password is correct</td>
</tr>
</tbody>
</table>

<p>Input Data Type: x-www-form-unlencoded</p>

<table>
<thead>
<tr>
<th>Parameters</th>
<th>Attributes</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>sub</td>
<td>(required)String</td>
<td>member account ID</td>
</tr>
<tr>
<td>pwd</td>
<td>(required)String</td>
<td>The password encrypt string with seed by AES ( Key Format : ddHHssMMddHHssMM )</td>
</tr>
<tr>
<td>seed</td>
<td>(required)String</td>
<td>The AES key which is the timestamp when registering( Format : yyyyMMddHHmmss )</td>
</tr>
</tbody>
</table>

<p>Result:</p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
</tbody>
</table>

<p>JSON Content Define:</p>

<table>
<thead>
<tr>
<th>ret_code</th>
<th>ret_desc</th>
</tr>
</thead>

<tbody>
<tr>
<td>0</td>
<td>Incorrect</td>
</tr>
<tr>
<td>1</td>
<td>Correct</td>
</tr>
</tbody>
</table>

<p>Return example:</p>

<div><pre><code class="language-none">{
  &quot;ret_code&quot; : 0
}</code></pre></div>

<p><a href="#index">TOP</a> </p>

<h2 id="toc_10"><a name="userallinfo"></a> userallinfo</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/userallinfo</td>
<td>POST</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>取得指定的所有使用者資料</td>
</tr>
<tr>
<td>Get target user&#39;s all information</td>
</tr>
</tbody>
</table>

<p>Input Data Type: x-www-form-unlencoded</p>

<table>
<thead>
<tr>
<th>Parameters</th>
<th>Attributes</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>sub</td>
<td>(required)String</td>
<td>member account ID</td>
</tr>
</tbody>
</table>

<p>Result:</p>

<p>Successful -</p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_data</td>
<td>The user&#39;s all infomation data in json format</td>
</tr>
</tbody>
</table>

<p>Fail - </p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_desc</td>
<td>The state&#39;s detail description</td>
</tr>
</tbody>
</table>

<p>state_code Define:</p>

<table>
<thead>
<tr>
<th>ret_code</th>
<th>ret_desc</th>
</tr>
</thead>

<tbody>
<tr>
<td>200</td>
<td>Get user infomation success</td>
</tr>
<tr>
<td>401</td>
<td>Basic authentication header&#39;s format is invalid</td>
</tr>
<tr>
<td>404</td>
<td>The subject isn&#39;t registried</td>
</tr>
<tr>
<td>500</td>
<td>Server SQL execute error</td>
</tr>
</tbody>
</table>

<p>Return example:</p>

<p>Successful -</p>

<div><pre><code class="language-none">{
  &quot;ret_code&quot;: 200,
  &quot;ret_data&quot;: {
    &quot;sub&quot;: &quot;a&quot;,
    &quot;website&quot;: null,
    &quot;zoneinfo&quot;: null,
    &quot;birthdate&quot;: null,
    &quot;email_verified&quot;: false,
    &quot;address&quot;: {
      &quot;street_address&quot;: &quot;492, Sg. Chua&quot;,
      &quot;country&quot;: &quot;Malaysia&quot;,
      &quot;formatted&quot;: &quot;491, Sg. Chua, 43 000 Kajang, Selangor&quot;,
      &quot;locality&quot;: &quot;Kajang&quot;,
      &quot;region&quot;: &quot;Selangor&quot;,
      &quot;postal_code&quot;: &quot;43 000&quot;
    },
    &quot;gender&quot;: &quot;male&quot;,
    &quot;profile&quot;: null,
    &quot;register_clientID&quot;: &quot;ominec&quot;,     //!!!  The data is custom field !!!
    &quot;phone_number_verified&quot;: false,
    &quot;preferred_username&quot;: null,
    &quot;given_name&quot;: null,
    &quot;middle_name&quot;: null,
    &quot;locale&quot;: null,
    &quot;picture&quot;: null,
    &quot;updated_at&quot;: &quot;2016-06-27 04:07:27.0&quot;,
    &quot;name&quot;: &quot;Smith Liu&quot;,
    &quot;nickname&quot;: &quot;a桑桑&quot;,
    &quot;phone_number&quot;: &quot;886911222333&quot;,
    &quot;family_name&quot;: null,
    &quot;email&quot;: &quot;a@gmail.com&quot;
  }
}</code></pre></div>

<p>Fail -</p>

<div><pre><code class="language-none">{
  &quot;ret_desc&quot;: &quot;The Subject isn&#39;t registried&quot;,
  &quot;ret_code&quot;: 404
}</code></pre></div>

<p><a href="#index">TOP</a> </p>

<h2 id="toc_11"><a name="allsyncfaildata"></a> allsyncfaildata</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/allsyncfaildata</td>
<td>GET</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>取得當其他Client更新userinfo時，應該Post給relay party同步卻失敗的所有同步資料</td>
</tr>
<tr>
<td>Get all synchronize data which relay party should get but fail when other client update userinfo</td>
</tr>
</tbody>
</table>

<p>Input Data Type: None</p>

<p>Result:</p>

<p>Successful -</p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_data</td>
<td>The user&#39;s all infomation data in json format</td>
</tr>
</tbody>
</table>

<p>Fail - </p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_desc</td>
<td>The state&#39;s detail description</td>
</tr>
</tbody>
</table>

<p>state_code Define:</p>

<table>
<thead>
<tr>
<th>ret_code</th>
<th>ret_desc</th>
</tr>
</thead>

<tbody>
<tr>
<td>200</td>
<td>Get all synchorize data success  or No any synchorize fail data</td>
</tr>
<tr>
<td>401</td>
<td>Basic authentication header&#39;s format is invalid</td>
</tr>
<tr>
<td>402</td>
<td>The client is not registried</td>
</tr>
<tr>
<td>500</td>
<td>Server SQL execute error</td>
</tr>
</tbody>
</table>

<p>Return example:</p>

<p>Successful -</p>

<div><pre><code class="language-none">{
  &quot;ret_code&quot;: 200,
  &quot;ret_data&quot;: [
    {
      &quot;sync_time&quot;: &quot;2016-06-22 07:26:24.0&quot;,
      &quot;sync_data&quot;: {
        &quot;sub&quot;: &quot;a&quot;,
        &quot;nickname&quot;: &quot;Asir&quot;
      }
    },
    {
      &quot;sync_time&quot;: &quot;2016-06-22 07:26:32.0&quot;,
      &quot;sync_data&quot;: {
        &quot;sub&quot;: &quot;a&quot;,
        &quot;nickname&quot;: &quot;Bsir&quot;
      }
    },
    {
      &quot;sync_time&quot;: &quot;2016-06-22 07:26:39.0&quot;,
      &quot;sync_data&quot;: {
        &quot;sub&quot;: &quot;a&quot;,
        &quot;nickname&quot;: &quot;Csir&quot;
      }
    }
  ]
}</code></pre></div>

<p>Fail -</p>

<div><pre><code class="language-none">{
  &quot;ret_desc&quot;: &quot;The Client is not registried&quot;,
  &quot;ret_code&quot;: 402
}</code></pre></div>

<p><a href="#index">TOP</a> </p>

<h2 id="toc_12"><a name="clearsyncfaildata"></a> clearsyncfaildata</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/clearsyncfaildata</td>
<td>GET</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>Relay party在成功取得所有同步資料後，來告知清除所有跟此Relay party相關的同步失敗的資料</td>
</tr>
<tr>
<td>After relay party get all synchronize data, notice sso server to remove all synchronize data about the relay party</td>
</tr>
</tbody>
</table>

<p>Input Data Type: None</p>

<p>Result:</p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_desc</td>
<td>The state&#39;s detail description</td>
</tr>
</tbody>
</table>

<p>state_code Define:</p>

<table>
<thead>
<tr>
<th>ret_code</th>
<th>ret_desc</th>
</tr>
</thead>

<tbody>
<tr>
<td>200</td>
<td>Clear all synchronize data success</td>
</tr>
<tr>
<td>500</td>
<td>Server SQL execute error</td>
</tr>
</tbody>
</table>

<div><pre><code class="language-none">Return example:
{
  &quot;ret_desc&quot;: &quot;Clear all synchronize data success&quot;,
  &quot;ret_code&quot;: 200
}</code></pre></div>

<p><a href="#index">TOP</a> </p>

<h2 id="toc_13"><a name="forgotpassword"></a> forgotpassword</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/forgotpassword</td>
<td>POST</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>在驗證User帳號和email是匹配之後，發送有效時間15分鐘的驗證碼到使用者信箱</td>
</tr>
<tr>
<td>After verifing user account and email are matched,sending verify code to user&#39;s email</td>
</tr>
</tbody>
</table>

<p>Input Data Type: x-www-form-unlencoded</p>

<table>
<thead>
<tr>
<th>Parameters</th>
<th>Attributes</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>sub</td>
<td>(required)String</td>
<td>member account ID</td>
</tr>
<tr>
<td>email</td>
<td>(required)String</td>
<td>user&#39;s e-mail</td>
</tr>
</tbody>
</table>

<p>Result:</p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_desc</td>
<td>The state&#39;s detail description</td>
</tr>
</tbody>
</table>

<p>state_code Define:</p>

<table>
<thead>
<tr>
<th>ret_code</th>
<th>ret_desc</th>
</tr>
</thead>

<tbody>
<tr>
<td>200</td>
<td>Sending verify code by e-mail success</td>
</tr>
<tr>
<td>401</td>
<td>Basic authentication header&#39;s format is invalid</td>
</tr>
<tr>
<td>404</td>
<td>The subject isn&#39;t registried</td>
</tr>
<tr>
<td>410</td>
<td>Sending email fail</td>
</tr>
<tr>
<td>411</td>
<td>The user have no email</td>
</tr>
<tr>
<td>412</td>
<td>The email is not match with the subject</td>
</tr>
<tr>
<td>500</td>
<td>Server SQL execute error</td>
</tr>
</tbody>
</table>

<div><pre><code class="language-none">Return example:
{
  &quot;ret_desc&quot;: &quot;Sending verify code by e-mail success&quot;,
  &quot;ret_code&quot;: 200
}</code></pre></div>

<p><a href="#index">TOP</a> </p>

<h2 id="toc_14"><a name="checkforgotverify"></a> checkforgotverify</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/checkforgotverify</td>
<td>POST</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>當User輸入驗證碼時，檢查忘記密碼的驗證碼是否正確</td>
</tr>
<tr>
<td>When user input verify code for forgoting password,checking its accuracy</td>
</tr>
</tbody>
</table>

<p>Input Data Type: x-www-form-unlencoded</p>

<table>
<thead>
<tr>
<th>Parameters</th>
<th>Attributes</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>sub</td>
<td>(required)String</td>
<td>member account ID</td>
</tr>
<tr>
<td>email</td>
<td>(required)String</td>
<td>user&#39;s e-mail</td>
</tr>
<tr>
<td>verify</td>
<td>(required)String</td>
<td>verify code which we sended by email</td>
</tr>
</tbody>
</table>

<p>Result:</p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_desc</td>
<td>The state&#39;s detail description</td>
</tr>
</tbody>
</table>

<p>state_code Define:</p>

<table>
<thead>
<tr>
<th>ret_code</th>
<th>ret_desc</th>
</tr>
</thead>

<tbody>
<tr>
<td>200</td>
<td>Verify code is correct</td>
</tr>
<tr>
<td>401</td>
<td>Basic authentication header&#39;s format is invalid</td>
</tr>
<tr>
<td>413</td>
<td>Verify code is incorrect</td>
</tr>
<tr>
<td>414</td>
<td>Verify code is expired</td>
</tr>
<tr>
<td>500</td>
<td>Server SQL execute error</td>
</tr>
</tbody>
</table>

<div><pre><code class="language-none">Return example:
{
  &quot;ret_desc&quot;: &quot;Verify code is correct &quot;,
  &quot;ret_code&quot;: 200
}</code></pre></div>

<p><a href="#index">TOP</a> </p>

<h2 id="toc_15"><a name="verifycodeupdatepwd"></a> verifycodeupdatepwd</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/verifycodeupdatepwd</td>
<td>POST</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>User驗證碼驗證通過後，使用驗證碼來進行密碼的更動</td>
</tr>
<tr>
<td>After user pass verify code chechking,using verify code to update their password</td>
</tr>
</tbody>
</table>

<p>Input Data Type: x-www-form-unlencoded</p>

<table>
<thead>
<tr>
<th>Parameters</th>
<th>Attributes</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>sub</td>
<td>(required)String</td>
<td>member account ID</td>
</tr>
<tr>
<td>email</td>
<td>(required)String</td>
<td>user&#39;s e-mail</td>
</tr>
<tr>
<td>verify</td>
<td>(required)String</td>
<td>verify code which we sended by email</td>
</tr>
<tr>
<td>pwd</td>
<td>(required)String</td>
<td>the password is encrypted by AES</td>
</tr>
<tr>
<td>seed</td>
<td>(required)String</td>
<td>password&#39;s AES Key</td>
</tr>
</tbody>
</table>

<p>Result:</p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_desc</td>
<td>The state&#39;s detail description</td>
</tr>
</tbody>
</table>

<p>state_code Define:</p>

<table>
<thead>
<tr>
<th>ret_code</th>
<th>ret_desc</th>
</tr>
</thead>

<tbody>
<tr>
<td>200</td>
<td>Updating password completed</td>
</tr>
<tr>
<td>401</td>
<td>Basic authentication header&#39;s format is invalid</td>
</tr>
<tr>
<td>404</td>
<td>The subject isn&#39;t registried</td>
</tr>
<tr>
<td>413</td>
<td>Verify code is incorrect</td>
</tr>
<tr>
<td>414</td>
<td>Verify code is expired</td>
</tr>
<tr>
<td>500</td>
<td>Server SQL execute error</td>
</tr>
</tbody>
</table>

<div><pre><code class="language-none">Return example:
{
  &quot;ret_desc&quot;: &quot;Updating password completed &quot;,
  &quot;ret_code&quot;: 200
}</code></pre></div>

<p><a href="#index">TOP</a> </p>

<h2 id="toc_16"><a name="getsubemail"></a> getsubemail</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/getsubemail</td>
<td>POST</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>取得User的所有副Email</td>
</tr>
<tr>
<td>Get user&#39;s all sub-email</td>
</tr>
</tbody>
</table>

<p>Input Data Type: x-www-form-unlencoded</p>

<table>
<thead>
<tr>
<th>Parameters</th>
<th>Attributes</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>sub</td>
<td>(required)String</td>
<td>member account ID</td>
</tr>
</tbody>
</table>

<p>Result:</p>

<p>Successful -</p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_data</td>
<td>The user&#39;s all sub email data in json format</td>
</tr>
</tbody>
</table>

<p>Fail - </p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_desc</td>
<td>The state&#39;s detail description</td>
</tr>
</tbody>
</table>

<p>state_code Define:</p>

<table>
<thead>
<tr>
<th>ret_code</th>
<th>ret_desc</th>
</tr>
</thead>

<tbody>
<tr>
<td>200</td>
<td>Get sub-email completed</td>
</tr>
<tr>
<td>401</td>
<td>Basic authentication header&#39;s format is invalid</td>
</tr>
<tr>
<td>404</td>
<td>The subject isn&#39;t registried</td>
</tr>
<tr>
<td>500</td>
<td>Server SQL execute error</td>
</tr>
</tbody>
</table>

<p>Successful -</p>

<div><pre><code class="language-none">{
  &quot;ret_code&quot;: 200,
  &quot;ret_data&quot;: [
    {
      &quot;email&quot;: &quot;a@gmail.com&quot;,
      &quot;verified&quot;: &quot;false&quot;
    },
    {
      &quot;email&quot;: &quot;smith@tomin.tw&quot;,
      &quot;verified&quot;: &quot;true&quot;
    } 
  ]
}</code></pre></div>

<p>Fail -</p>

<div><pre><code class="language-none">{
  &quot;ret_desc&quot;: &quot;The subject isn&#39;t registried &quot;,
  &quot;ret_code&quot;: 404
}</code></pre></div>

<p><a href="#index">TOP</a> </p>

<h2 id="toc_17"><a name="updatesubemail"></a> updatesubemail</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/updatesubemail</td>
<td>POST</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>新增或更新指定User的副Email</td>
</tr>
<tr>
<td>Add or update target user&#39;s sub-email</td>
</tr>
</tbody>
</table>

<p>Input Data Type: x-www-form-unlencoded</p>

<table>
<thead>
<tr>
<th>Parameters</th>
<th>Attributes</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>sub</td>
<td>(required)String</td>
<td>member account ID</td>
</tr>
<tr>
<td>email</td>
<td>(required)String</td>
<td>e-mail</td>
</tr>
<tr>
<td>verified</td>
<td>(required)Boolean</td>
<td>verified</td>
</tr>
</tbody>
</table>

<p>Result:</p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_desc</td>
<td>The state&#39;s detail description</td>
</tr>
</tbody>
</table>

<p>state_code Define:</p>

<table>
<thead>
<tr>
<th>ret_code</th>
<th>ret_desc</th>
</tr>
</thead>

<tbody>
<tr>
<td>200</td>
<td>Update sub-email completed</td>
</tr>
<tr>
<td>401</td>
<td>Basic authentication header&#39;s format is invalid</td>
</tr>
<tr>
<td>417</td>
<td>The sub-email isn&#39;t registried</td>
</tr>
<tr>
<td>500</td>
<td>Server SQL execute error</td>
</tr>
</tbody>
</table>

<div><pre><code class="language-none">Return example:
{
  &quot;ret_desc&quot;: &quot;Update sub-email completed &quot;,
  &quot;ret_code&quot;: 200
}</code></pre></div>

<p><a href="#index">TOP</a> </p>

<h2 id="toc_18"><a name="deletesubemail"></a> deletesubemail</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/deletesubemail</td>
<td>POST</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>刪除指定User的副Email</td>
</tr>
<tr>
<td>Delete target user&#39;s sub-email</td>
</tr>
</tbody>
</table>

<p>Input Data Type: x-www-form-unlencoded</p>

<table>
<thead>
<tr>
<th>Parameters</th>
<th>Attributes</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>sub</td>
<td>(required)String</td>
<td>member account ID</td>
</tr>
<tr>
<td>email</td>
<td>(required)String</td>
<td>e-mail</td>
</tr>
</tbody>
</table>

<p>Result:</p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_desc</td>
<td>The state&#39;s detail description</td>
</tr>
</tbody>
</table>

<p>state_code Define:</p>

<table>
<thead>
<tr>
<th>ret_code</th>
<th>ret_desc</th>
</tr>
</thead>

<tbody>
<tr>
<td>200</td>
<td>Delete sub-email completed</td>
</tr>
<tr>
<td>401</td>
<td>Basic authentication header&#39;s format is invalid</td>
</tr>
<tr>
<td>404</td>
<td>The subject isn&#39;t registried</td>
</tr>
<tr>
<td>417</td>
<td>The sub-email isn&#39;t registried</td>
</tr>
<tr>
<td>500</td>
<td>Server SQL execute error</td>
</tr>
</tbody>
</table>

<div><pre><code class="language-none">Return example:
{
  &quot;ret_desc&quot;: &quot;Delete sub-email completed &quot;,
  &quot;ret_code&quot;: 200
}</code></pre></div>

<p><a href="#index">TOP</a>   </p>

<h2 id="toc_19"><a name="getsubphone"></a> getsubphone</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/getsubphone</td>
<td>POST</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>取得User的所有副電話號碼</td>
</tr>
<tr>
<td>Get user&#39;s all sub-phone number</td>
</tr>
</tbody>
</table>

<p>Input Data Type: x-www-form-unlencoded</p>

<table>
<thead>
<tr>
<th>Parameters</th>
<th>Attributes</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>sub</td>
<td>(required)String</td>
<td>member account ID</td>
</tr>
</tbody>
</table>

<p>Result:</p>

<p>Successful -</p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_data</td>
<td>The user&#39;s all sub-phone number data in json format</td>
</tr>
</tbody>
</table>

<p>Fail - </p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_desc</td>
<td>The state&#39;s detail description</td>
</tr>
</tbody>
</table>

<p>state_code Define:</p>

<table>
<thead>
<tr>
<th>ret_code</th>
<th>ret_desc</th>
</tr>
</thead>

<tbody>
<tr>
<td>200</td>
<td>Get sub-phone completed</td>
</tr>
<tr>
<td>401</td>
<td>Basic authentication header&#39;s format is invalid</td>
</tr>
<tr>
<td>404</td>
<td>The subject isn&#39;t registried</td>
</tr>
<tr>
<td>500</td>
<td>Server SQL execute error</td>
</tr>
</tbody>
</table>

<p>Successful -</p>

<div><pre><code class="language-none">{
  &quot;ret_code&quot;: 200,
  &quot;ret_data&quot;: [
    {
      &quot;phone_number&quot;: &quot;+60174584845&quot;,
      &quot;verified&quot;: &quot;false&quot;
    },
    {
      &quot;phone_number&quot;: &quot;+886-952589550&quot;,
      &quot;verified&quot;: &quot;true&quot;
    } 
  ]
}</code></pre></div>

<p>Fail -</p>

<div><pre><code class="language-none">{
  &quot;ret_desc&quot;: &quot;The subject isn&#39;t registried &quot;,
  &quot;ret_code&quot;: 404
}</code></pre></div>

<p><a href="#index">TOP</a> </p>

<h2 id="toc_20"><a name="updatesubphone"></a> updatesubphone</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/updatesubphone</td>
<td>POST</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>新增或更新指定User的副電話號碼</td>
</tr>
<tr>
<td>Add or update target user&#39;s sub-phone</td>
</tr>
</tbody>
</table>

<p>Input Data Type: x-www-form-unlencoded</p>

<table>
<thead>
<tr>
<th>Parameters</th>
<th>Attributes</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>sub</td>
<td>(required)String</td>
<td>member account ID</td>
</tr>
<tr>
<td>phone_number</td>
<td>(required)String</td>
<td>sub-phone number</td>
</tr>
<tr>
<td>verified</td>
<td>(required)Boolean</td>
<td>verified</td>
</tr>
</tbody>
</table>

<p>Result:</p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_desc</td>
<td>The state&#39;s detail description</td>
</tr>
</tbody>
</table>

<p>state_code Define:</p>

<table>
<thead>
<tr>
<th>ret_code</th>
<th>ret_desc</th>
</tr>
</thead>

<tbody>
<tr>
<td>200</td>
<td>Update sub-phone completed</td>
</tr>
<tr>
<td>401</td>
<td>Basic authentication header&#39;s format is invalid</td>
</tr>
<tr>
<td>404</td>
<td>The subject isn&#39;t registried</td>
</tr>
<tr>
<td>419</td>
<td>The sub-phone isn&#39;t registried</td>
</tr>
<tr>
<td>500</td>
<td>Server SQL execute error</td>
</tr>
</tbody>
</table>

<div><pre><code class="language-none">Return example:
{
  &quot;ret_desc&quot;: &quot;Update sub-phone completed &quot;,
  &quot;ret_code&quot;: 200
}</code></pre></div>

<p><a href="#index">TOP</a> </p>

<h2 id="toc_21"><a name="deletesubphone"></a> deletesubphone</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/deletesubphone</td>
<td>POST</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>刪除User的副phone</td>
</tr>
<tr>
<td>Delete target user&#39;s  sub-phone</td>
</tr>
</tbody>
</table>

<p>Input Data Type: x-www-form-unlencoded</p>

<table>
<thead>
<tr>
<th>Parameters</th>
<th>Attributes</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>sub</td>
<td>(required)String</td>
<td>member account ID</td>
</tr>
<tr>
<td>phone_number</td>
<td>(required)String</td>
<td>sub-phone number</td>
</tr>
</tbody>
</table>

<p>Result:</p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_desc</td>
<td>The state&#39;s detail description</td>
</tr>
</tbody>
</table>

<p>state_code Define:</p>

<table>
<thead>
<tr>
<th>ret_code</th>
<th>ret_desc</th>
</tr>
</thead>

<tbody>
<tr>
<td>200</td>
<td>Delete sub-phone completed</td>
</tr>
<tr>
<td>401</td>
<td>Basic authentication header&#39;s format is invalid</td>
</tr>
<tr>
<td>404</td>
<td>The subject isn&#39;t registried</td>
</tr>
<tr>
<td>419</td>
<td>The sub-phone isn&#39;t registried</td>
</tr>
<tr>
<td>500</td>
<td>Server SQL execute error</td>
</tr>
</tbody>
</table>

<div><pre><code class="language-none">Return example:
{
  &quot;ret_desc&quot;: &quot;Delete sub-phone completed &quot;,
  &quot;ret_code&quot;: 200
}</code></pre></div>

<p><a href="#index">TOP</a>   </p>

<h1 id="toc_22"><a name="Predefine API"></a> Predefine API</h1>

<h3 id="toc_23">These APIs can get predifine data list for some special data field(gender,locale,zoneinfo) for input when call register/ updatemember API.</h3>

<h3 id="toc_24">這些API能夠取得當呼叫register/updatemember 要填入一些特定欄位(像gender,locale,zoneinfo)時，要填入的預載資料清單</h3>

<h4 id="toc_25">API root URL : http://qasso.tomin.tw:8081/TominOP/oidc/predefine</h4>

<h5 id="toc_26">These API&#39;s result format is all the same like these:</h5>

<h5 id="toc_27">這些API的呼叫結果格式時都是一樣的像這樣：</h5>

<p>Successful -</p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_data</td>
<td>All predefine data in json array</td>
</tr>
</tbody>
</table>

<p>Fail - </p>

<table>
<thead>
<tr>
<th>JSON key</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ret_code</td>
<td>The back state code which we defined</td>
</tr>
<tr>
<td>ret_desc</td>
<td>The state&#39;s detail description</td>
</tr>
</tbody>
</table>

<p>state_code Define:</p>

<table>
<thead>
<tr>
<th>ret_code</th>
<th>ret_desc</th>
</tr>
</thead>

<tbody>
<tr>
<td>200</td>
<td>Get success</td>
</tr>
<tr>
<td>401</td>
<td>Basic authentication header&#39;s format is invalid</td>
</tr>
<tr>
<td>500</td>
<td>Server SQL execute error</td>
</tr>
</tbody>
</table>

<p>Return example:</p>

<p>Fail -</p>

<div><pre><code class="language-none">{
  &quot;ret_desc&quot;: &quot;Basic authentication header&#39;s format is invalid &quot;,
  &quot;ret_code&quot;: 401
}</code></pre></div>

<h5 id="toc_28">Below document is the predefine API calling way and result when calling success :</h5>

<h5 id="toc_29">以下文件就是每個predefine API呼叫方法和成功時的返回結果:</h5>

<h2 id="toc_30"><a name="gender"></a> gender</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/gender</td>
<td>GET</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>取得性別資料</td>
</tr>
<tr>
<td>Get gender&#39;s predefine list</td>
</tr>
</tbody>
</table>

<p>Return example:</p>

<p>Successful -</p>

<div><pre><code class="language-none">{
  &quot;ret_code&quot;: 200,
  &quot;ret_data&quot;: [
    &quot;male&quot;,
    &quot;female&quot;
  ]
}</code></pre></div>

<p><a href="#index">TOP</a> </p>

<h2 id="toc_31"><a name="locale"></a> locale</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/locale</td>
<td>GET</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>取得地點資料</td>
</tr>
<tr>
<td>Get locale&#39;s predefine list</td>
</tr>
</tbody>
</table>

<p>Return example:</p>

<p>Successful -</p>

<div><pre><code class="language-none">{
  &quot;ret_code&quot;: 200,
  &quot;ret_data&quot;: [
    {
      &quot;data&quot;: &quot;ms_MY&quot;,       //data is for register/updatemember API inserting
      &quot;express&quot;: &quot;Malaysia&quot;  //express is for show on the user interface view
    },
    {
      &quot;data&quot;: &quot;zh_TW&quot;,
      &quot;express&quot;: &quot;Taiwan&quot;
    }
  ]
}</code></pre></div>

<p><a href="#index">TOP</a> </p>

<h2 id="toc_32"><a name="zoneinfo"></a> zoneinfo</h2>

<table>
<thead>
<tr>
<th>API Path</th>
<th>Action</th>
</tr>
</thead>

<tbody>
<tr>
<td>/zoneinfo</td>
<td>GET</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>取得地區資料</td>
</tr>
<tr>
<td>Get zoneinfo&#39;s predefine list</td>
</tr>
</tbody>
</table>

<p>Return example:</p>

<p>Successful -</p>

<div><pre><code class="language-none">{
  &quot;ret_code&quot;: 200,
  &quot;ret_data&quot;: [
    &quot;Asis/Malaysia&quot;,
    &quot;Asia/Taiwan&quot;
  ]
}</code></pre></div>

<p><a href="#index">TOP</a> </p>




</body>

</html>
